<script>
import { ref } from 'vue'
const sidebar = ref()

const navigationUnder = ref([
    {
      title: 'Settings',
      icon: 'CogIcon',
      route: 'dashboard'
    },
    {
      title: 'Help',
      icon: 'QuestionMarkCircleIcon',
      route: 'dashboard'
    },
    {
      title: 'Privacy',
      icon: 'ShieldCheckIcon',
      route: 'dashboard'
    }
  ])
  const navigation = ref([
    {
      title: 'Home',
      icon: 'HomeIcon',
      route: 'dashboard',
      msg: 3,
      ref: false
    },
    {
      title: 'Orders',
      icon: 'InboxInIcon',
      route: 'dashboard',
      msg: 3,
      ref: false,
      child: [
        {
          title: 'Orders',
          route: 'dashboard',
        },
        {
          title: 'Abandoned',
          route: 'dashboard',
        },
      ]

    },
    {
      title: 'Product',
      icon: 'TagIcon',
      route: 'dashboard',
      msg: 3,
      ref: false,
      child: [
        {
          title: 'All products',
          route: 'dashboard',
        },
        {
          title: 'Transfers',
          route: 'dashboard',
        },
        {
          title: 'Inventory',
          route: 'dashboard',
        }
      ]

    },
    {
      title: 'Customers',
      icon: 'UsersIcon',
      route: 'dashboard',
      msg: 0,
      ref: false
    },
    {
      title: 'Analytics',
      icon: 'ChartPieIcon',
      route: 'dashboard',
      msg: 3,
      ref: false,
      child: [
        {
          title: 'Dashboard',
          route: 'dashboard',
        },
        {
          title: 'Reports',
          route: 'dashboard',
        }
      ]
    },
    {
      title: 'Marketing',
      icon: 'SpeakerphoneIcon',
      route: 'dashboard',
      msg: 0,
      ref: false,
      child: [
        {
          title: 'Overview',
          route: 'dashboard',
        },
        {
          title: 'Campaigns',
          route: 'dashboard',
        },
        {
          title: 'Automations',
          route: 'dashboard',
        }
      ]
    },
    {
      title: 'Offers',
      icon: 'ReceiptTaxIcon',
      route: 'dashboard',
    },
    {
      title: 'Apps',
      icon: 'CollectionIcon',
      route: 'dashboard',
      msg: 0,
      ref: false
    },
    {
      title: 'Shop',
      icon: 'ShoppingBagIcon',
      route: 'dashboard',
      msg: 0,
      ref: false
    },
  ])
</script>
<template>
  <div class="h-screen flex  bg-gray-100">
  <transition enter-active-class="opacity-0 -translate-x-full" leave-active-class="opacity-0 -translate-x-full">
  
  
  <div v-show="sidebar"  class="fixed inset-0 flex z-40 lg:hidden transform transition duration-300 " role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-white bg-opacity-75" aria-hidden="true"></div>
    <div class="relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-green-light">
      <div class="absolute top-0 right-0 -mr-12 pt-2">
        <button @click="sidebar = false" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
          <span class="sr-only">Close sidebar</span>
          <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="flex-shrink-0 flex items-center px-4">
       <img class="h-8 w-auto" src="img/logo_header.png" alt="Easywire logo"> 
      </div>
      <nav class="mt-5 flex-shrink-0 h-full overflow-y-auto" aria-label="Sidebar">
        <div v-for="(item, i) in navigation" :key="i" class="px-2">
        <button @click="item.ref = !item.ref" type="button" class="bg-green-light text-white hover:bg-green-dark hover:text-gray-100 group w-full flex items-center pl-2 pr-1 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-light" aria-controls="sub-menu-1" aria-expanded="false">
          <!-- Heroicon name: outline/users -->
          <component class="mr-4 h-6 w-6 text-white"  :is="item.icon"/>
          {{ item.title }}
          <!-- Expanded: "text-gray-400 rotate-90", Collapsed: "text-gray-300" -->
          <span v-show="item.msg > 0" class="group-hover:bg-green-light ml-auto inline-block py-0.5 px-3 text-xs font-medium rounded-full ring-white ring-1">
          {{ item.msg }}
        </span>
        </button>
        <!-- Expandable link section, show/hide based on state. -->
        <transition enter-active-class="opacity-0 -translate-y-2" leave-active-class="opacity-0 -translate-y-2">
          <div v-show="item.ref" class="transition duration-150 transform">
            <div v-for="(itemChild, index) in item.child" :key="index"  class="m-1" id="sub-menu-1">
              <a href="#" class="group w-full flex items-center pl-11 pr-2 py-2 text-sm font-medium text-white rounded-md hover:text-gray-100 hover:bg-green-dark">
              {{ itemChild.title }}
              </a>
            </div>
          </div>
        </transition>
        
        
          </div>
          <div class="mt-6 pt-6">
            <div class="px-2 space-y-1">
              <a v-for="(item, i) in navigationUnder" :key="i" class="hover:bg-green-dark text-white group flex items-center px-2 py-2 text-sm leading-6 font-medium rounded-md" aria-current="page">
              <!-- Heroicon name: outline/home -->
              <component class="mr-4 h-6 w-6 text-white"  :is="item.icon"/>
              {{ item.title }}
            </a>
            </div>
          </div>
      </nav>
    </div>

    <div class="flex-shrink-0 w-14" aria-hidden="true">
      <!-- Dummy element to force sidebar to shrink to fit close icon -->
    </div>
  </div>
</transition>
  <!-- Static sidebar for desktop -->
  <div class="hidden lg:flex lg:flex-shrink-0 overflow-hidden">
    <div class="flex flex-col w-64 overflow-y-hidden">
      <!-- Sidebar component, swap this element with another sidebar if you like -->
      <div class="flex flex-col flex-grow bg-green-light pt-5 pb-4 ">
        <div class="flex items-center flex-shrink-0 px-4">
          <img class="h-8 w-auto" src="img/logo_header.png" alt="Easywire logo">
        </div>
        <nav class="mt-5 flex-1 flex flex-col" aria-label="Sidebar">
        <div v-for="(item, i) in navigation" :key="i" class="px-2">
        <button @click="item.ref = !item.ref" type="button" class="bg-green-light text-white hover:bg-green-dark hover:text-gray-100 group w-full flex items-center pl-2 pr-1 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-light" aria-controls="sub-menu-1" aria-expanded="false">
          <!-- Heroicon name: outline/users -->
          <component class="mr-4 h-6 w-6 text-white"  :is="item.icon"/>
          {{ item.title }}
          <!-- Expanded: "text-gray-400 rotate-90", Collapsed: "text-gray-300" -->
          <span v-show="item.msg > 0" class="group-hover:bg-green-light ml-auto inline-block py-0.5 px-3 text-xs font-medium rounded-full ring-white ring-1">
          {{ item.msg }}
        </span>
        </button>
        <!-- Expandable link section, show/hide based on state. -->
        <transition enter-active-class="opacity-0 -translate-y-2" leave-active-class="opacity-0 -translate-y-2">
          <div v-show="item.ref" class="transition duration-150 transform">
            <div v-for="(itemChild, index) in item.child" :key="index"  class="m-1" id="sub-menu-1">
              <a href="#" class="group w-full flex items-center pl-11 pr-2 py-2 text-sm font-medium text-white rounded-md hover:text-gray-100 hover:bg-green-dark">
              {{ itemChild.title }}
              </a>
            </div>
          </div>
        </transition>
          </div>
          <div class="mt-3 pt-3">
            <div class="px-2 space-y-1">
              <a v-for="(item, i) in navigationUnder" :key="i" class="hover:bg-green-dark text-white group flex items-center px-2 py-2 text-sm leading-6 font-medium rounded-md" aria-current="page">
              <!-- Heroicon name: outline/home -->
              <component class="mr-4 h-6 w-6 text-white"  :is="item.icon"/>
              {{ item.title }}
            </a>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>

  <div class="flex-1 overflow-auto focus:outline-none">
    <div class="relative z-10 flex-shrink-0 flex h-16 bg-green-dark border-b border-gray-200 lg:border-none">
      <button @click="sidebar = !sidebar" class="px-4 border-r border-gray-200 text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-dark lg:hidden">
        <span class="sr-only">Open sidebar</span>
        <!-- Heroicon name: outline/menu-alt-1 -->
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
        </svg>
      </button>
      <!-- Search bar -->
      <div class="bg-green-dark flex-1 px-4 flex justify-between sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8">
        <div class="flex-1 flex">
          <form class="w-full flex md:ml-0">
            <label for="search_field" class="sr-only">Search</label>
            <div class="relative w-full text-white focus-within:text-gray-200">
              <div class="absolute inset-y-0 left-0 flex items-center pointer-events-none" aria-hidden="true">
                <!-- Heroicon name: solid/search -->
                <component class="h-5 w-5"  :is="'SearchIcon'"/>
              </div>
              <input id="search_field" name="search_field" class="font-medium bg-green-dark block w-full h-full pl-8 pr-3 py-2 border-transparent text-white placeholder-white focus:outline-none focus:ring-0 focus:border-transparent sm:text-sm" placeholder="Search" type="search">
            </div>
          </form>
        </div>
        <div class="ml-4 flex items-center md:ml-6">
          <button class="bg-green-dark p-1 rounded-full text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-dark">
            <span class="sr-only">View notifications</span>
            <!-- Heroicon name: outline/bell -->
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
          </button>

          <!-- Profile dropdown -->
          <div class="ml-3 relative">
            <m-drop-down noIcon>
        <template #body>
          <img
            class="h-7 w-7 rounded-full"
            src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixqx=eG1lRgrgwG&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <span class="hidden ml-3 text-white text-sm font-medium lg:block"
            ><span class="sr-only">Open user menu for </span>Emilia Birch</span
          >
        </template>
        <m-drop-down-item>Account Settings</m-drop-down-item>
        <m-drop-down-item>Preferences</m-drop-down-item>
        <m-drop-down-item>Logout</m-drop-down-item>
      </m-drop-down>
          </div>
        </div>
      </div>
    </div>
    <main class="flex-1 relative pb-8 z-0 overflow-y-auto p-4">
      <router-view v-slot="{ Component }">
        <transition enter-active-class="opacity-0 translate-x-2" leave-active-class="opacity-0 -translate-x-2">
          <component class="transition duration-300 transform" :is="Component" />
        </transition>
      </router-view>
    </main>
  </div>
</div>
</template>


<script setup="props, emit">

import { defineProps } from 'vue'

defineProps({
  title: String,
  actions: Array
})


</script>